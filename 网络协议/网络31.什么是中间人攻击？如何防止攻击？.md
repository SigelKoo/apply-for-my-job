# 什么是中间人攻击？如何防止攻击？

中间人攻击是一种可以回溯到早期计算时代的网络入侵方式。当未授权的实体将自己置于两个通讯系统之间并试图截获正在传递的信息时，便会发生此类攻击，其本质便是窃听攻击。为了更好地理解中间人攻击的工作原理，可以参考如下两个示例。

#### 离线中间人攻击

离线中间人攻击听起来比较基础，但目前仍在全球范围内使用。

例如，有人拦截了你发布的消息，对其进行了读取和重新打包，然后将其发回给您或您的原始收件人。然后，当对方回复您时，同样的情况会再次上演，该中间人会继续截获并阅读原本通信双方互发的所有信息。

如果操作得当的话，通信双方完全不会知道自己遭遇了中间人攻击，因为他们根本看不到这些信息曾被截获和窃取过。

接管两个参与者之间的通信通道是中间人攻击的核心。

它还为攻击者打开了其他欺骗途径。如果攻击者控制了通信方式，那么他们就可以篡改传输中的消息。就我们上述示例而言，攻击者不仅可以拦截并读取通信双方传递的信息，甚至还可以篡改消息内容，提出特定请求作为其攻击活动的一部分。

当中间人控制您的通信时，他们还可以在完成攻击后立即删除与此次攻击相关的任何信息记录，让通信双方无法察觉任何异常。

#### 在线中间人攻击

尽管使用计算机或其他数字硬件代替了传统的信件，但是在线中间人攻击的工作原理几乎与离线中间人攻击相同。

例如，您用计算机设备连接到咖啡馆的免费公共Wi-Fi上，然后试图访问银行的网站。随后，您可能会遇到如下错误提示。

![一文了解“中间人攻击（MITM）”（附防范建议）](https://img.4hou.com/uploads/ueditor/php/upload/image/20210121/1611198544203670.jpeg)

如上图所示，您会遇到一个证书错误，通知您该银行的网站不具备有效的加密证书。这表面上好像是提醒您银行的配置存在问题，真实情况却是中间人攻击正在进行中。

尽管如此，很多人仍然选择单击该错误信息并继续访问该银行网站。之后，他们进行银行账户登录、汇款、账单支付等操作，貌似一切如常。

而实际上，攻击者可能已经建立好了一个虚假的服务器和伪造的银行网站。当你连接到虚假的银行服务器时，他们会将目标银行的真实页面略作修改，并呈现给您。您所有输入的登录详细信息，都将被发送到中间人服务器的后台。

这也就解释了上图中出现的加密证书错误的安全提醒。中间人服务器根本就没有与真实银行相同的安全证书，尽管它可能也具有其他的安全证书。

### 如何防范中间人攻击？

中间人攻击很难防御。攻击者存在多种攻击组合，这也就意味着防范中间人攻击的方法也必须是多方位的

- 使用HTTPS：确保您访问的每个网站都使用HTTPS标头。毕竟面对SSL剥离和中间人恶意软件，确保使用HTTPS仍然是最好的防御选择之一；

- 不要忽略警告：如果您的浏览器提示，您正在访问的网站存在安全问题，那么就请引起足够的重视。毕竟安全证书警告可以帮您直观地判定您的登录凭据是否会被攻击者截获；

- 不要使用公共Wi-Fi：如果可以的话，尽量不要使用公共Wi-Fi。有时，无法避免使用公共Wi-Fi，那么请下载并安装vpn，为连接增加安全性。此外，在使用公共Wi-Fi连接时，请留意浏览器的安全警告。如果警告的数量突然猛增，那么很可能表明存在中间人攻击或漏洞；
- 电子邮件前，检查电子邮件的发件人；
- 如果你是一个网站管理员，你应当执行HSTS协议；
- 如果你的网站使用了SSL，确保你禁用了不安全的SSL/TLS协议。你应当只启用了TLS 1.1和TLS 1.2；
- 运行并更新防病毒软件：请确保防病毒软件处于最新状态，此外也可以考虑使用其他安全工具，例如Malwarebytes。

