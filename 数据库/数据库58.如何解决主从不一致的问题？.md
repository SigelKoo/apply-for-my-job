# 如何解决主从不一致的问题？

主从同步有时延，这个时延期间读从库，可能读到不一致的数据。

#### 方案一：忽略

任何脱离业务的架构设计都是耍流氓，绝大部分业务，例如：百度搜索，淘宝订单，QQ消息，58帖子都允许短时间不一致。

画外音：如果业务能接受，最推崇此法。

如果业务能够接受，别把系统架构搞得太复杂。

#### 方案二：强制读主

![img](https://img-blog.csdn.net/20180710205435341?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RpbmdxaW5naHU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

使用一个高可用主库提供数据库服务

读和写都落到主库上

采用缓存来提升系统读性能

#### 方案三：选择性读主

![img](https://img-blog.csdn.net/20180710205525255?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RpbmdxaW5naHU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

在cache里记录哪些记录发生过写请求，来路由读主还是读从

