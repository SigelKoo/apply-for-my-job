# 唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？

### 区别

先看看查询操作两者的区别。

- 对于普通索引来说，查找到满足条件的第一个记录(5, 500)后，需要查找下一个记录，直到碰到第一个不满足k=5条件的记录。
- 对于唯一索引来说，由于索引定义了唯一性，查找到第一个满足条件的记录后，就会停止继续检索。

上面的查询区别对于性能而言是微乎其微的，InnoDB读写数据是按页来的，也是说当找到k=5的记录的时候，它所在的数据⻚就都在内存里了，那么我们只需要判断下一条数据是不是等于5即可，直到出现不为5的值为止，这些都是在内存中操作的，所以性能微乎其微。

再来看看更新插入操作。

1. 这个记录要更新的目标⻚在内存中。这时，InnoDB的处理流程如下：

	- 对于唯一索引来说，找到3和5之间的位置，判断到没有冲突，插入这个值，语句执行结束;
	- 对于普通索引来说，找到3和5之间的位置，插入这个值，语句执行结束。

	普通索引和唯一索引对更新语句性能影响的差别，只是一个判断，只会耗费微小的CPU时间。可以认为性能相同。
	
2. 这个记录要更新的目标⻚不在内存中。这时，InnoDB的处理流程如下：

   - 对于唯一索引来说，需要将数据⻚读入内存，判断到没有冲突，插入这个值，语句执行结束;
   - 对于普通索引来说，则是将更新记录在change buffer，语句执行就结束了。

在要更新的目录页不在内存中时，普通索引更快。


